console.log(`---- REVIEW: WRITING CLEAN AND MODERN JAVASCRIPT ---`);
// https://www.udemy.com/course/the-complete-javascript-course/learn/lecture/22649509#questions

// ðŸ“Œ READABLE CODE:
// ðŸ‘‰ðŸ¼ Write code so that others can understand it
// ðŸ‘‰ðŸ¼ Write code so that you can understand it in 1 year 
// ðŸ‘‰ðŸ¼ Avoid too â€œcleverâ€ and overcomplicated solutions 
// ðŸ‘‰ðŸ¼ Use descriptive variable names: what they contain 
// ðŸ‘‰ðŸ¼ Use descriptive function names: what they do;;

// ðŸ“Œ GENERAL:
// ðŸ‘‰ðŸ¼ Use DRY principle (refactor your code)
// ðŸ‘‰ðŸ¼ Donâ€™t pollute global namespace, encapsulate instead;
// ðŸ‘‰ðŸ¼ Donâ€™t use var
// ðŸ‘‰ðŸ¼ Use strong type checks (=== and !==)

// ðŸ“Œ AVOID NESTED CODE:
// ðŸ‘‰ðŸ¼ Use early return (guard clauses)
// ðŸ‘‰ðŸ¼ Use ternary (conditional) or logical operators instead of if Use multiple if instead of if/else-if
// ðŸ‘‰ðŸ¼ Avoid for loops, use array methods instead
// ðŸ‘‰ðŸ¼ Avoid callback-based asynchronous APIs

// ðŸ“Œ FUNCTIONS:
// ðŸ‘‰ðŸ¼ Generally, functions should do only one thing
// ðŸ‘‰ðŸ¼ Donâ€™t use more than 3 function parameters
// ðŸ‘‰ðŸ¼ Use default parameters whenever possible
// ðŸ‘‰ðŸ¼ Generally, return same data type as received
// ðŸ‘‰ðŸ¼ Use arrow functions when they make code more readable

// ðŸ“Œ OOP:
// ðŸ‘‰ðŸ¼ Use ES6 classes
// ðŸ‘‰ðŸ¼ Encapsulate data and donâ€™t mutate it from outside the class
// ðŸ‘‰ðŸ¼ Implement method chaining
// ðŸ‘‰ðŸ¼ Do not use arrow functions as methods (in regular objects)

// ðŸ“Œ ASYNCHRONOUS CODE:
// ðŸ‘‰ðŸ¼ Consume promises with async / await for best readability 
// ðŸ‘‰ðŸ¼ Whenever possible, run promises in parallel(Promise.all) 
// ðŸ‘‰ðŸ¼ Handle errors and promise rejections;

// ðŸ“Œ FUNCTIONAL PROGRAMMING PRINCIPLES:
// ðŸŽ¯ Functional Programming: 
// ðŸ‘‰ðŸ¼ Declarative programming paradigm
// ðŸ‘‰ðŸ¼ Based on the idea of writing software by combining many
// ðŸ‘‰ðŸ¼ pure functions, avoiding side effects and mutating data
// ðŸ‘‰ðŸ¼ Side effect: Modification (mutation) of any data outside of the function (mutating external variables, logging to console, writing to DOM, etc.)
// ðŸ‘‰ðŸ¼ Pure function: Function without side effects. Does not depend on external variables. Given the same inputs, always returns the same outputs.
// ðŸ‘‰ðŸ¼ Immutability: State (data) is never modified! Instead, state is copied and the copy is mutated and returned.
// ðŸ‘‰ðŸ¼ Examples: REACT, REDUX



console.log('--- LETS FIX SOME BAD CODE: PART 1 & 2 ---');
// https://www.udemy.com/course/the-complete-javascript-course/learn/lecture/22649513#questions
// https://www.udemy.com/course/the-complete-javascript-course/learn/lecture/24607048#questions

const budget = [
    { value: 250, description: 'Sold old TV ðŸ“º', user: 'jonas' },
    { value: -45, description: 'Groceries ðŸ¥‘', user: 'jonas' },
    { value: 3500, description: 'Monthly salary ðŸ‘©â€ðŸ’»', user: 'jonas' },
    { value: 300, description: 'Freelancing ðŸ‘©â€ðŸ’»', user: 'jonas' },
    { value: -1100, description: 'New iPhone ðŸ“±', user: 'jonas' },
    { value: -20, description: 'Candy ðŸ­', user: 'matilda' },
    { value: -125, description: 'Toys ðŸš‚', user: 'matilda' },
    { value: -1800, description: 'New Laptop ðŸ’»', user: 'jonas' },
];
  
  const spendingLimits = {
    jonas: 1500,
    matilda: 100,
  };

  const getLimit = user => spendingLimits?.[user] ?? 0
  
  const addExpense = function (value, description, user = 'jonas' ) {
      user = user.toLowerCase();
      
    if (value <= getLimit(user)) {
      budget.push({ value: -value, description, user });
    }
  };
  addExpense(10, 'Pizza ðŸ•');
  addExpense(100, 'Going to movies ðŸ¿', 'Matilda');
  addExpense(200, 'Stuff', 'Jay');
  
  const checkExpenses = function () {
    for (const entry of budget) {
      if (entry.value < -getLimit(entry.user)) {
        entry.flag = 'limit';
      }
    }
  };
  checkExpenses();
  
  const logBigExpenses = function (bigLimit) {
    let output = '';
    for (const entry of budget) {
        output += entry.value <= -bigLimit ? `${entry.description.slice(-2)} / ` : ''
    }
    output = output.slice(0, -2); // Remove last '/ '
    console.log(output);
  };

console.log(budget);
logBigExpenses(1);